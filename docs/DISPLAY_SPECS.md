# Papers3 显示规格文档

## 📐 屏幕基本参数

### 硬件规格
- **屏幕尺寸**: 4.7英寸电子墨水屏
- **分辨率**: 960 × 540 像素
- **灰度级**: 16级灰度
- **坐标系**: 左上角(0,0)，右下角(959,539)

### 显示区域
- **物理尺寸**: 960px × 540px
- **可用区域**: 840px × 475px
- **边框损失**: 左右各60px，上下各32.5px

## 🔤 字体和文本规格

### 默认字体参数
- **字体类型**: MicroPython内置字体
- **字符高度**: 约15-18像素
- **字符宽度**: 约8-12像素（等宽字体）
- **行间距建议**: 70-80像素
- **字符间距**: 自动

### 文本显示特性
- **中英文混合**: 支持
- **最大行长度**: 约80-100字符
- **推荐行长度**: 60-80字符
- **文本颜色**: 0(黑色) 到 15(白色)

## 📏 最佳边界设置

### 经过测试验证的最佳边界
```python
# 最佳显示边界（基于实际测试）
OPTIMAL_BOUNDARIES = {
    'left': 10,      # 左边界 x=10
    'right': 850,    # 右边界 x=850  
    'top': 45,       # 上边界 y=45
    'bottom': 520    # 下边界 y=520
}

# 安全显示区域
SAFE_AREA = {
    'x': 10,
    'y': 45, 
    'width': 840,    # 850 - 10
    'height': 475    # 520 - 45
}
```

### 边界说明
- **左边界(x=10)**: 确保文字不被左侧边框遮挡
- **右边界(x=850)**: 保留110px右侧空间，防止文字被截断
- **上边界(y=45)**: 避免与屏幕顶部元素重叠
- **下边界(y=520)**: 保留20px下方空间

## 📝 文本布局规范

### 标准文本布局
```python
# 推荐的文本布局参数
TEXT_LAYOUT = {
    'start_x': 50,           # 文本起始x坐标
    'start_y': 80,           # 文本起始y坐标  
    'line_spacing': 70,      # 行间距
    'char_width': 10,        # 平均字符宽度
    'char_height': 16,       # 字符高度
    'max_chars_per_line': 80 # 每行最大字符数
}
```

### 特殊布局场景
- **标题文字**: 推荐y≥60，居中显示
- **坐标标注**: 使用灰色(color=8)，字体较小
- **边界标记**: 使用最小安全距离
- **网格坐标**: 上方y=45，左侧x=10

## 🎨 绘图元素规格

### 线条和形状
```python
# 线条规格
LINE_SPECS = {
    'grid_lines': {'color': 8, 'width': 1},      # 网格线：灰色
    'border_lines': {'color': 0, 'width': 1},    # 边框线：黑色
    'reference_lines': {'color': 12, 'width': 1} # 参考线：浅灰
}

# 形状规格  
SHAPE_SPECS = {
    'circles': {'min_radius': 3, 'max_radius': 50},
    'rectangles': {'min_size': 10, 'border_width': 1}
}
```

### 颜色使用规范
- **0**: 黑色 - 主要文本和边框
- **8**: 中灰 - 坐标标注和网格
- **12**: 浅灰 - 参考线和辅助元素
- **15**: 白色 - 背景和反色文本

## 🧪 测试验证数据

### 边界测试结果
```
测试项目          | 推荐值  | 验证状态
----------------|--------|----------
上边界文字位置    | y=45   | ✅ 最佳
下边界文字位置    | y=520  | ✅ 正常  
左边界文字位置    | x=10   | ✅ 正常
右边界文字位置    | x=850  | ✅ 正常
网格坐标显示     | 分离式  | ✅ 无重叠
文字行间距       | 70px   | ✅ 适中
```

### 性能基准
- **屏幕刷新时间**: ~2-3秒（全屏更新）
- **局部刷新**: 支持（具体实现待验证）
- **最大文本行数**: 约6-8行（70px间距）
- **最大网格密度**: 50px × 50px

## 📋 开发建议

### 文本显示最佳实践
1. **边界检查**: 始终使用`OPTIMAL_BOUNDARIES`范围
2. **文本长度**: 限制每行最多80字符
3. **行间距**: 使用70-80px标准间距
4. **坐标标注**: 使用灰色小字，避免干扰

### 调试和测试
1. **使用screen_range_test.py**: 验证显示效果
2. **边界测试**: 定期验证边界设置
3. **字体测试**: 测试中英文混合显示
4. **性能测试**: 测量刷新时间
5. **使用display_specs.py**: 引用标准化常量和函数

## 🔄 更新历史

- **2024-12**: 初始版本，基于实际测试确定最佳边界
- **测试设备**: M5Stack Papers3 ESP32-S3R8
- **测试条件**: 标准室温，默认对比度设置

## 💻 代码中的使用

### 引用显示规格常量

在demo程序中可以直接引用标准化的常量：

```python
# 在demo目录中使用
from display_specs import OPTIMAL_BOUNDARIES, COLORS, get_safe_text_position

# 使用最佳边界
epdiy.draw_text("text", OPTIMAL_BOUNDARIES['left'], OPTIMAL_BOUNDARIES['top'], COLORS['BLACK'])

# 使用安全位置函数
safe_x, safe_y = get_safe_text_position(x, y)
epdiy.draw_text("safe text", safe_x, safe_y, COLORS['BLACK'])
```

### 相关文件

- **`demo/display_specs.py`** - 显示规格常量和函数
- **`demo/display_specs_example.py`** - 使用示例和演示
- **`demo/screen_range_test.py`** - 屏幕测试工具（已应用最佳边界）

### 开发建议

1. **新的demo程序**: 建议引用 `display_specs.py` 中的常量
2. **边界检查**: 使用 `check_boundaries()` 和 `get_safe_text_position()` 函数
3. **颜色标准**: 使用 `COLORS` 字典中的预定义颜色
4. **布局参数**: 参考 `TEXT_LAYOUT` 中的推荐值 